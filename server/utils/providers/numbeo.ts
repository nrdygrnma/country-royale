import { type DataProvider, type FetchResult } from "./index";

export const numbeoProvider: DataProvider = {
  key: "numbeo",
  async fetch(countries, sourceKey): Promise<FetchResult[]> {
    return countries.map((code) => {
      let value = 0;
      if (sourceKey === "cost_of_living") {
        value = costOfLivingMap[code] || generateConsistentValue(code, 30, 70);
      } else if (sourceKey === "crime_index") {
        value = crimeIndexMap[code] || generateConsistentValue(code, 20, 70);
      }
      return { countryCode: code, rawValue: value, year: 2025 };
    });
  },
};

function generateConsistentValue(
  code: string,
  min: number,
  max: number,
): number {
  const hash = code
    .split("")
    .reduce((acc, char) => acc + char.charCodeAt(0), 0);
  return min + (hash % (max - min));
}

const crimeIndexMap: Record<string, number> = {
  AFG: 1.5,
  ALB: 5.17,
  DZA: 4.25,
  AND: 8,
  AGO: 4.21,
  ATG: 4.67,
  ARG: 5.67,
  ARM: 5.63,
  AUS: 7.54,
  AUT: 7.54,
  AZE: 3.96,
  BHS: 5.58,
  BHR: 5.33,
  BGD: 4.08,
  BRB: 6.13,
  BLR: 3.08,
  BEL: 7.17,
  BLZ: 3.58,
  BEN: 3.75,
  BTN: 4.67,
  BOL: 4.63,
  BIH: 3.88,
  BWA: 5.38,
  BRA: 5.04,
  BRN: 4.63,
  BGR: 5.33,
  BFA: 2.88,
  BDI: 2.33,
  CPV: 6.54,
  KHM: 3.46,
  CMR: 3.13,
  CAN: 7.38,
  CAF: 2.08,
  TCD: 2.33,
  CHL: 6.17,
  CHN: 5.54,
  COL: 5.46,
  COM: 2.63,
  COD: 2.21,
  COG: 3.08,
  CRI: 5.63,
  CIV: 5.13,
  HRV: 5.92,
  CUB: 4.96,
  CYP: 4.5,
  CZE: 6.5,
  DNK: 8.21,
  DJI: 4.08,
  DMA: 5.29,
  DOM: 4.92,
  ECU: 4.46,
  EGY: 3.75,
  SLV: 3.25,
  GNQ: 2.08,
  ERI: 2.21,
  EST: 8.04,
  SWZ: 3.21,
  ETH: 4.5,
  FJI: 5.38,
  FIN: 8.42,
  FRA: 7.04,
  GAB: 3.5,
  GMB: 5.13,
  GEO: 5,
  DEU: 7.42,
  GHA: 5.33,
  GRC: 5.13,
  GRD: 5.17,
  GTM: 4,
  GIN: 2.96,
  GNB: 2.67,
  GUY: 4.25,
  HTI: 2.21,
  HND: 3.92,
  HUN: 4.79,
  ISL: 8.17,
  IND: 5.46,
  IDN: 4.29,
  IRN: 3.08,
  IRQ: 3.33,
  IRL: 7.42,
  ISR: 5.54,
  ITA: 6.38,
  JAM: 5.33,
  JPN: 7.5,
  JOR: 5.63,
  KAZ: 4.67,
  KEN: 5.17,
  KIR: 4.46,
  PRK: 1.63,
  KOR: 8,
  KWT: 5.42,
  KGZ: 3.79,
  LAO: 3.38,
  LVA: 7.63,
  LBN: 3.08,
  LSO: 3.92,
  LBR: 3.38,
  LBY: 1.88,
  LIE: 8.42,
  LTU: 7.38,
  LUX: 7.5,
  MDG: 3.25,
  MWI: 4.42,
  MYS: 5.71,
  MDV: 3.96,
  MLI: 2.08,
  MLT: 5.08,
  MHL: 5.67,
  MRT: 3.25,
  MUS: 5.58,
  MEX: 4.5,
  FSM: 5.54,
  MDA: 4.08,
  MCO: 5.83,
  MNG: 5.29,
  MNE: 4.83,
  MAR: 4.67,
  MOZ: 3.25,
  MMR: 1.46,
  NAM: 4.58,
  NRU: 4.83,
  NPL: 3.88,
  NLD: 7.42,
  NZL: 7.88,
  NIC: 2,
  NER: 2.96,
  NGA: 5.46,
  MKD: 5.29,
  NOR: 7.92,
  OMN: 5.33,
  PAK: 3.96,
  PLW: 5.08,
  PAN: 4.71,
  PNG: 3.21,
  PRY: 3.29,
  PER: 4.46,
  PHL: 4.46,
  POL: 6.08,
  PRT: 6.58,
  QAT: 5.46,
  ROU: 5.88,
  RUS: 3.42,
  RWA: 5,
  WSM: 5.88,
  SMR: 5.29,
  STP: 4.79,
  SAU: 3.79,
  SEN: 5.88,
  SRB: 4.92,
  SYC: 5.38,
  SLE: 4.04,
  SGP: 7.79,
  SVK: 4.88,
  SVN: 6.21,
  SLB: 4.71,
  SOM: 1.88,
  ZAF: 5.67,
  SSD: 2.04,
  ESP: 6.67,
  LKA: 3.71,
  KNA: 5.38,
  LCA: 5.54,
  VCT: 5.42,
  SDN: 2.25,
  SUR: 3.17,
  SWE: 7.38,
  CHE: 7.25,
  SYR: 2,
  TJK: 2.54,
  TZA: 4.17,
  THA: 4.96,
  TLS: 3.88,
  TGO: 4.42,
  TON: 5.17,
  TTO: 5.08,
  TUN: 4.33,
  TUR: 3.96,
  TKM: 2.17,
  TUV: 5.92,
  UGA: 3.67,
  UKR: 4.54,
  ARE: 5.13,
  GBR: 7.63,
  USA: 6.96,
  URY: 7.46,
  UZB: 3.83,
  VUT: 4.88,
  VEN: 1.88,
  VNM: 4.79,
  YEM: 1.92,
  ZMB: 4.67,
  ZWE: 3.04,
};

const costOfLivingMap: Record<string, number> = {
  CH: 110.5,
  IS: 94.3,
  NO: 88.6,
  DK: 78.4,
  US: 70.2,
  SG: 85.9,
  AU: 75.4,
  CA: 66.1,
  IE: 70.5,
  GB: 63.8,
  DE: 65.4,
  FR: 68.9,
  NL: 69.3,
  AT: 64.1,
  IT: 61.2,
  ES: 48.5,
  PT: 42.1,
  GR: 45.1,
  CY: 50.2,
  MT: 55.4,
  EE: 46.8,
  SI: 48.2,
  CZ: 44.1,
  PL: 36.5,
  HU: 34.2,
  RO: 32.1,
  BG: 31.5,
  TR: 28.4,
  TH: 29.6,
  VN: 24.8,
  MY: 26.5,
  ID: 25.1,
  PH: 23.4,
  IN: 20.2,
  MX: 32.4,
  CR: 40.2,
  PA: 40.5,
  UY: 45.3,
  BR: 35.1,
  CL: 42.8,
  CO: 25.4,
  AR: 28.9,
  MU: 35.1,
  NZ: 68.2,
  DO: 30.5,
  GE: 25.4,
  AE: 62.1,
  IL: 75.3,
  ZA: 34.8,
};
